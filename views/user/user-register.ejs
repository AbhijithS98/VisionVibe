<!DOCTYPE html>
<html class="no-js" lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/page-login-register.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:26:06 GMT -->
<head>
    <meta charset="utf-8">
    <title>Evara - eCommerce HTML Template</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="public/user/assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link rel="stylesheet" href="public/user/assets/css/main.css">
    <!-- Toastify -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

</head>

<body>
    <header class="header-area header-style-5">
        
        <div class="header-bottom sticky-bar sticky-white-bg">
            <div class="container">
                <div class="header-wrap header-space-between position-relative">
                    <div class="logo logo-width-1">
                        <a href="/" style="font-family: Arial, sans-serif; font-size: 40px; color: #333; text-decoration: none; font-weight: bold;">VisionVibe</a>
                    </div>
                    <div class="main-menu main-menu-grow main-menu-padding-1 main-menu-lh-1 main-menu-mrg-1 hm3-menu-padding d-none d-lg-block hover-boder">
                        <nav>
                            <ul>
                                <li><a class="active" href="/">Home </i></a>
                                   
                                </li>
                                <li><a href="/shoplist">Shop </a>
                                    
                                </li>
                                <li>
                                    <a href="#">About</a>
                                </li>
                                                             
                            </ul>
                        </nav>
                    </div>
                   
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/" rel="nofollow">Home</a>
                    <span></span> Pages
                    <span></span> User Register
                </div>
            </div>
        </div>

<div class="container p-4" >
 <div class="row justify-content-center">
    <div class="col-lg-5">
     <div class="login_wrap widget-taber-content p-30 background-white border-radius-5">
        <div class="padding_eight_all bg-white">
            <div class="heading_s1">
                <h3 class="mb-30">Create an Account</h3>
                
            </div>
            <% if (message) { %>
                <p id="errorMessage" class="text-danger"><%= message %></p>
            <% } %>
            <p class="mb-50 font-sm">
                Your personal data will be used to support your experience throughout this website, to manage access to your account, and for other purposes described in our privacy policy
            </p>
            <p id="messageDisplay"></p>
            <form method="post" id="logform" action="/usersignup">
                <div id="otpMessage" style="padding: 10px; margin-bottom: 10px; border-radius: 5px; background-color: #dff0d8; color: #3c763d; display: none;"></div>
                <div class="form-group">
                  <input 
                    type="text" 
                    name="username" 
                    id="typeNameX" 
                    placeholder="Username"
                    required
                  />
                </div>
                <p><span id="error1" style="display: none; color: red;" ></span></p>
                <div class="form-group mt-2 row">
                    <div class="col-md-8">
                      <input
                        type="email"
                        name="email"
                        placeholder="Enter your email"
                        class="form-control w-70"
                        id="typeEmailX"
                        required
                      />
                    </div>

                    <div class="col-md-4">
                      <button type="button" class="btn otp"   id="sendOtp" onclick="otpSend()">Send OTP</button>
                    </div>
                    <p><span id="error2" style="display: none;color: red; "></span></p>
                  </div>
                  <div class="form-group mt-2 row ">

                    <div class="col-6">
                      <input
                        type="number"
                        name="otp"
                        placeholder="Enter OTP"
                        class="form-control "
                        id="otpverify"
                        required
                      />
                    </div>

                  </div>
                    <div class="col-6">
                      <button type="button" class="btn btn-primary" id="verify" onclick="otpVerify()">Verify</button>
                      <span id="timerDisplay" class="ms-2"></span>
                    </div> 
        
                    <p><span id="error3" style="display: none; color: red;" ></span></p>

                    <div class="form-group mt-3">
                        <input
                          type="number"
                          name="mobile"
                          placeholder="Mobile number"
                          class="form-control"
                          id="typeMobileX"
                          required
                        />
                      </div>
                      
                      <p><span id="error5" style="color: red;"></span></p>
                <div class="form-group">
                    <input                    
                    type="password" 
                    name="password" 
                    placeholder="Password"
                    id="typePW"
                    required
                    />
                </div>
                <p><span id="error4" style="display: none; color: red;" ></span></p>
                <div class="form-group">
                    <input required="" type="password" name="confirmPassword" placeholder="Confirm password">
                </div>
                <div class="form-group">
                    <input  type="number" name="referalCode" placeholder="Type the referal code here if any.!">
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-fill-out btn-block hover-up" name="signUP">Submit &amp; Register</button>
                </div>
                
            </form>
            <div class="divider-text-center mt-15 mb-15">
                <span> or</span>
            </div>
            <ul class="btn-login list_none text-center mb-15">
                <li><a href="/auth/google" class="btn btn-google hover-up">Login With Google</a></li>
            </ul>
            <div class="text-muted text-center">Already have an account? <a href="userlogin">Sign in now</a></div>
        </div>
     </div>
    </div>
  </div>
</div>
<div class="container pb-20 wow fadeIn animated">
  <div class="row">
      <div class="col-12 mb-20">
          <div class="footer-bottom"></div>
      </div>
      <div class="col-lg-6">
          <p class="float-md-left font-sm text-muted mb-0">&copy; 2021, <strong class="text-brand">Evara</strong> - HTML Ecommerce Template </p>
      </div>
      <div class="col-lg-6">
          <p class="text-lg-end text-start font-sm text-muted mb-0">
              Designed by <a href="http://alithemes.com/" target="_blank">Alithemes.com</a>. All rights reserved
          </p>
      </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="/public/js/userSignUp.js"></script>
<!-- Add Toastify JS -->
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>


<script>
    
    function validateEmail(email) {
    const emailPattern = /^([a-zA-Z0-9._-]+)@([a-zA-Z-]+\.[a-zA-Z]{2,4})$/;
    return emailPattern.test(email);
}



function otpSend() {

const emailInput = document.getElementById("typeEmailX").value;
console.log(emailInput);


if (!validateEmail(emailInput)) {
    document.getElementById('error2').innerText = 'Invalid Email';
    document.getElementById('error2').style.display = 'block'; //
}else{

    document.getElementById('error2').style.display = 'none';
$.ajax({
    url: '/sendotp',
    type: 'POST',
    data: JSON.stringify({ email: emailInput }),
    contentType: 'application/json',
    success: function(response) {
     if(response.success){
        // Start the timer when OTP is sent
        startTimer();
        document.querySelector(".otp").disabled=true;
        document.getElementById("otpMessage").innerText = "OTP has been sent to your email.";
        otpMessage.style.display = "block";

        // document.getElementById('otpTimer').textContent = '';
        setTimeout(function() {
         document.getElementById('otpMessage').innerText = '';
         document.getElementById('otpMessage').style.display = 'none';
         }, 30000); // 30000 milliseconds = 30 seconds      
        }
    },
    error: function(error) {
        console.error('Error sending OTP:', error.responseJSON.error);
    }
   });
}}


function otpVerify() {
    clearInterval(intervalId); // Stop the timer
    const sendOtpButton = document.getElementById('sendOtp');
    const enteredOtp = document.getElementById("otpverify").value;
    console.log(enteredOtp);

    $.ajax({
        url: '/verifyotp',
        type: 'POST',
        data: JSON.stringify({ otp: enteredOtp }),
        contentType: 'application/json',
        success: function(response) {
            if (response.status) {
                // OTP verification successful, display "Verified"
                console.log('OTP verified successfully');
                document.getElementById('timerDisplay').textContent = 'OTP Verified'; // Display "OTP Verified" message
                document.getElementById('error3').textContent = ''; // Remove "Invalid OTP" message
                document.getElementById('error3').style.display = 'none'

            } else {
                // Invalid OTP, display "Invalid OTP"
                console.log('Invalid OTP');
                document.getElementById('error3').textContent = 'Invalid OTP'; // Display "Invalid OTP" message
                document.getElementById('error3').style.display = 'block'
                sendOtpButton.textContent = 'Resend OTP'
                document.querySelector(".otp").disabled= false;
            }
        },
        error: function(error) {
            console.error('Error verifying OTP:', error.responseJSON.error);
       }
    });
}

let intervalId;
function startTimer() {
    let timer = 30; // Timer set to 30 seconds
    const timerDisplay = document.getElementById('timerDisplay');
    const sendOtpButton = document.getElementById('sendOtp');
    sendOtpButton.disabled = true;

     intervalId = setInterval(function() {
        timerDisplay.style.display='block'
        timerDisplay.textContent = 'Time left: ' + timer + ' seconds';

        timer--; // Decrement timer

        if (timer < 0) {
            clearInterval(intervalId); // Clear interval when timer reaches 0  
            sendOtpButton.textContent = 'Resend OTP'
            document.querySelector(".otp").disabled= false;
            timerDisplay.style.display = 'none';
        }
    }, 1000); // Update every second (1000 milliseconds)
}




setTimeout(function() {
    var errorMessage = document.getElementById('errorMessage');
            errorMessage.style.display = 'none';
        }, 5000); // 5000 milliseconds = 5 seconds
</script>
</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/page-login-register.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:26:06 GMT -->
</html>